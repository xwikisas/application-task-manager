.runTransformations
.#-----------------------------------------------------
.input|xwiki/2.0
.# Validate that non inline content is properly supported
.#-----------------------------------------------------
{{task id="someId" status="done"}}
Important task with the following deadline: {{date date="2021/09/07 00:00"/}}
{{/task}}
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginMacroMarkerStandalone [task] [id=someId|status=done] [Important task with the following deadline: {{date date="2021/09/07 00:00"/}}]
beginGroup [[class]=[task-macro]]
beginFormat [NONE]
onRawText [<input type="checkbox" data-taskId="someId" checked class="task-status">] [html/5.0]
endFormat [NONE]
beginGroup [[class]=[task-content]]
beginMetaData [[non-generated-content]=[java.util.List<org.xwiki.rendering.block.Block>]]
beginParagraph
onWord [Important]
onSpace
onWord [task]
onSpace
onWord [with]
onSpace
onWord [the]
onSpace
onWord [following]
onSpace
onWord [deadline]
onSpecialSymbol [:]
onSpace
beginMacroMarkerInline [date] [date=2021/09/07 00:00]
beginFormat [NONE] [[class]=[date-macro]]
onWord [07 / 09 / 2021]
endFormat [NONE] [[class]=[date-macro]]
endMacroMarkerInline [date] [date=2021/09/07 00:00]
endParagraph
endMetaData [[non-generated-content]=[java.util.List<org.xwiki.rendering.block.Block>]]
endGroup [[class]=[task-content]]
endGroup [[class]=[task-macro]]
endMacroMarkerStandalone [task] [id=someId|status=done] [Important task with the following deadline: {{date date="2021/09/07 00:00"/}}]
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<div class="task-macro"><input type="checkbox" data-taskId="someId" checked class="task-status"><div class="task-content"><p>Important task with the following deadline: <span class="date-macro">07 / 09 / 2021</span></p></div></div>